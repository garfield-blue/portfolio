<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <title>python portfolio</title>
    <link href="style.css" rel="stylesheet">
</head>

<body>

    <p>
        import discord
from discord import embeds
from discord.ext import commands
import asyncio
from random import shuffle
from random import choice
import os
#from datetime import datetime
bot = commands.Bot(command_prefix='!', intents=discord.Intents.all())


le_bg_ultime = (1185455268964859916, "@py_trombone")



parler = {}


boucle = True





#file = discord.File("C:/Users/Nathan/Desktop/projet_python/discorde/mon_bot_dev_perso/#musk.png", filename="musk.png")
embed_musk = discord.Embed(title="üí¶üí¶üí¶")
embed_musk.set_image(url="https://upload.wikimedia.org/wikipedia/commons/4/49/Elon_Musk_2015.jpg")


@bot.event
async def on_ready():
    print("le bot est en ligne")


@bot.event
async def on_message(message : discord.Message):
    global parler
    if not message.author.bot:
        print(message.content)

        for name, value in parler.items():

            if value and name == str(message.author):
                await message.delete()
                return None

        await bot.process_commands(message)




@bot.command()
async def nathan_v(ctx):
    await ctx.send("üçí")

@bot.command()
async def nathan_f(ctx):
    await ctx.send("üçë")

@bot.command()
async def mateo(ctx):
    await ctx.send("üçÜ")

@bot.command()
async def hugo(ctx):
    await ctx.send("ü´¶")

@bot.command()
async def clemence(ctx):
    await ctx.send("üê¨")






@bot.command()
async def random(ctx, *message:str):
    await ctx.send(choice(message))


@random.error
async def random_error(ctx, error):
    await ctx.send("Veuillez fournir tous les arguments n√©cessaires pour cette commande !")


























@bot.command()
async def sug(ctx, message):
    user_mention = ctx.author.mention
    message = await ctx.send(f"@everyone \nSuggestion de {user_mention}:\n{message}")
    emoji1 = 'üëé'#üîºüîΩüëéüëç
    emoji2 = 'üëç'
    await message.add_reaction(emoji1)
    await message.add_reaction(emoji2)
    await ctx.message.delete()


@bot.command()
async def hot(ctx):
    #await ctx.send(embed=embed)
    await ctx.send(embed=embed_musk)















@bot.command()
async def carr√©e(ctx, *nb):
    try:
        nb = int(nb[0])

    except ValueError:
        await ctx.send("il faut pr√©ciser UN NOMBRE en parametre")

    except IndexError:
        await ctx.send("il faut pr√©ciser UN NOMBRE en parametre")

    else:
        print(nb)
        await ctx.send(f"{nb}*{nb}= {nb**2}")




@bot.command()
async def peroquet(ctx, nb:int, *, message:str):
    for i in range(nb):
        await ctx.send(message)


@peroquet.error
async def peroquet_error(ctx, error):
    if isinstance(error, commands.MissingRequiredArgument):
        await ctx.send("Veuillez fournir tous les arguments n√©cessaires pour cette commande !")
    if isinstance(error, commands.errors.BadArgument):
        await ctx.send("Veuillez fournir tous les bons arguments n√©cessaires pour cette commande !")




@bot.command()
async def clear(ctx, amount: int=1) ->discord.Message:
    is_in_private_msg = ctx.guild is None and isinstance(ctx.author, discord.User)
    if is_in_private_msg:
        return await ctx.send("non")

    has_permition = ctx.author.guild_permissions.manage_messages
    if not has_permition:
        return await ctx.send("pas la permition mon coco")


    is_limit_reatch = amount > 100
    if is_limit_reatch:
        return await ctx.send("tu ne peux pas suprimer plus de 100")

    is_text_channel = isinstance(ctx.channel, discord.TextChannel)
    if not is_text_channel:
        return await ctx.send("tu dois utiliser cette commande dans salon de texte")

    await ctx.channel.purge(limit=amount+1)




@bot.command()
async def ban(ctx, member: discord.Member, *, reason: str=""):
    is_in_private_msg = ctx.guild is None and isinstance(ctx.author, discord.User)
    if is_in_private_msg:
        return await ctx.send("non")

    has_permition = ctx.author.guild_permissions.manage_messages
    if not has_permition:
        return await ctx.send("tu n'as pas la permition")

    is_bannable = ctx.author.top_role > member.top_role
    if not is_bannable:
        return await ctx.send("le membre que tu veux bannir a un grade plus √©lever que toi")

    if reason == "":
        reason = "pas de raison definie"


    await member.ban(reason=reason)
    await ctx.send(f"{member.name} a √©t√© bannie: {reason}")




#@bot.command()
#async def unban(ctx, member: str, *, reason: str=""):
#    is_in_private_msg = ctx.guild is None and isinstance(ctx.author, discord.User)
#    if is_in_private_msg:
#        return await ctx.send(f"vous ne pouvez pas utiliser cette commande en message priv√©")
#    
#    has_permission = ctx.author.guild_permissions.ban_members
#    if not has_permission:
#        return await ctx.send("tu n'as pas la permition")
#    
#    banned_user = [ban_entry.user.id async for ban_entry in ctx.guild.bans()]
#    for ban_entry in banned_user:
#
#        if str(ban_entry) == member:
#            await ctx.guild.unban(ban_entry, reason=reason)
#            return await ctx.send(f"{ban_entry} a ete debanni")
#        
#    await ctx.send(f"auquin utilisateur du nom de {member} a ete trouv√©")





#@bot.command()
#async def unban(ctx, member_id: int, *, reason: str = ""):
#    is_in_private_msg = ctx.guild is None and isinstance(ctx.author, discord.User)
#    if is_in_private_msg:
#        return await ctx.send("Vous ne pouvez pas utiliser cette commande en message priv√©.")
#
#    has_permission = ctx.author.guild_permissions.ban_members
#    if not has_permission:
#        return await ctx.send("Vous n'avez pas la permission de d√©bannir des membres.")
#
#    banned_users = await ctx.guild.bans()
#    for ban_entry in banned_users:
#        if ban_entry.user.id == member_id:
#            print(member_id)
#            await ctx.guild.unban(ban_entry.user, reason=reason)
#            return await ctx.send(f"L'utilisateur avec l'ID {member_id} a √©t√© d√©banni.")
#    
#    await ctx.send(f"Aucun utilisateur banni trouv√© avec l'ID {member_id}.")



@bot.command()
@commands.has_permissions(ban_members=True)
async def unban(ctx, id: int):
    try:
        user = await bot.fetch_user(id)
        await ctx.guild.unban(user)

        embed = discord.Embed(title="L'utilisateur a √©t√© d√©banni avec succ√®s.", color=discord.Color.green())
    except:
        embed = discord.Embed(title="Une erreur est survenue lors du d√©bannissement de l'utilisateur.", color=discord.Color.red())

    await ctx.reply(embed=embed)




@bot.command()
async def kick(ctx, member: discord.Member, *, reason: str=""):
    is_in_private_msg = ctx.guild is None and isinstance(ctx.author, discord.User)
    if is_in_private_msg:
        return await ctx.send("non")

    has_permition = ctx.author.guild_permissions.kick_members
    if ctx.author.id != le_bg_ultime[0] and not has_permition:
        return await ctx.send("tu n'as pas la permition")

    is_kick = ctx.author.top_role > member.top_role
    if ctx.author.id != le_bg_ultime[0] and not is_kick:
        return await ctx.send("le membre que tu veux kick a un grade plus √©lever que toi")

    if reason == "":
        reason = "pas de raison definie"


    await member.kick(reason=reason)
    return await ctx.send(f"{member.name} a √©t√© kick: {reason}")




@bot.command()
async def tg(ctx, member: discord.Member, time: int=1):
    global parler
    is_in_private_msg = ctx.guild is None and isinstance(ctx.author, discord.User)
    if is_in_private_msg:
        return await ctx.send("non")

    #is_bannable = ctx.author.top_role > member.top_role
    #if not is_bannable:
    #return await ctx.send("le membre que tu veux fare se taire a un grade plus√©leverquetoi")

    parler[member.name] = True
    await ctx.send(f"{member.name} va fermer sa bouche pendant {time}min")
    await asyncio.sleep(time*60)
    parler[member.name] = False
    await ctx.send(f"{member.name} peut re parler {time}min")


@tg.error
async def tg_error(ctx, error):
    if isinstance(error, commands.MissingRequiredArgument):
        await ctx.send("Veuillez fournir tous les arguments n√©cessaires pour cette commande!")
    if isinstance(error, commands.errors.BadArgument):
        await ctx.send("les argument presiser ne sont pas corespondant a ceu demander !")





@bot.command()
async def commande_inutil_1(ctx):
    if ctx.author.id == le_bg_ultime[0]:
        role = discord.utils.get(ctx.guild.roles, name="Goat")
        guild = ctx.guild
        member = guild.get_member(le_bg_ultime[0])
        await member.add_roles(role)
    await ctx.send("cette commande est inutile")


@bot.command()
async def commande_inutil_2(ctx):
    if ctx.author.id == le_bg_ultime[0]:
        role = discord.utils.get(ctx.guild.roles, name="Goat")
        guild = ctx.guild
        member = guild.get_member(le_bg_ultime[0])
        await member.remove_roles(role)
    await ctx.send("cette commande est inutile")

#@bot.command()
#async def bonjours(ctx):
#    await ctx.send(f"Bonjours {ctx.author}!")





bot.run("secrets")


    </p>

    <a target="_blank" href="../index.html">back!!!</a>


</body>

</html>

